# ------------------------------------------------
# HTTP (80) から HTTPS (443) へのリダイレクト設定
# ------------------------------------------------
server {
    listen 80;
    server_name localhost;

    # すべてのHTTPリクエストをHTTPSに強制リダイレクト
    # $host はリクエスト元のホスト名、$request_uri はリクエストされたパス
    return 301 https://$host$request_uri;
}

# ------------------------------------------------
# HTTPS (443) の設定（前回使用したもの）
# ------------------------------------------------
server {
    listen 443 ssl; # 443ポートでSSLを有効にしてリッスン

    server_name localhost;

    # SSL証明書と秘密鍵のパスを指定
    ssl_certificate /etc/nginx/certs/server.crt;
    ssl_certificate_key /etc/nginx/certs/server.key;

    # 推奨されるセキュリティ設定
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    # 静的コンテンツを配信する設定（例）
    location / {
        root /usr/share/nginx/html;
        index index.html;
    }
}