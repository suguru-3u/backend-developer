# introduction
このフォルダは、SQLのdumpについて学んだフォルダになります。<br>
SQLのdumpとは、データベースの内容をバックアップするための手法であり、データベースの状態を保存し、必要に応じて復元することができます。<br>

主に以下のような用途で使用されます。
- データベースのバックアップ: データベースの内容を定期的に保存し、障害やデータ損失に備えるために使用されます。
- データベースの移行: データベースを別のサーバーや環境に移行する際に、データベースの内容をエクスポートし、新しい環境でインポートするために使用されます。
- データベースの複製: 開発やテスト環境で本番データベースの内容を複製するために使用されます。

# dumpの種類
SQLのdumpには、複数の種類があります。
今回は、mysqldumpコマンドを使用した方法について学んでみた。

| 方法 | タイプ | 特徴 | 速度 | 主な用途 |
| :--- | :--- | :--- | :--- | :--- |
| **`mysqldump`** | 論理 | SQL文として出力。移植性が高い。 | 中速 | 小〜中規模のバックアップ、データ移行 |
| **`XtraBackup`** | **物理** | ファイルを直接コピー。非ブロック。 | **最速** | 大規模な本番環境 |
| **`SELECT INTO`** | 論理 | CSVなどで出力。クエリ結果の抽出。 | 高速 | 特定データの抽出、他システム連携 |
| **GUIツール** | 論理 | 視覚的な操作。 | 低〜中速 | 初心者、小規模環境 |

# 使用する技術
- MySQL
- Docker
- Docker Compose
- mysqldump(MySQLをインストールした時に一緒にダウンロードしてくれるみたい)


# usage
1. docker compose up でMySQLコンテナを起動します。
2. 以下のコマンドを実行して、コンテナ上でmysqldumpコマンドを実行し、データベースのダンプを取得します。

docker exec(実行中のコンテナ内でコマンドを実行するためのDockerコマンド) [コンテナ名またはID] mysqldump -u [ユーザー名] -p[パスワード] [DB名] > [出力ファイル名].sql
```bash
docker compose exec db mysqldump -u root -p sql-dump > dump.sql
```

3. 取得したdumpファイルを確認し、リストア（復元）を行います。以下のコマンドを実行して、ダンプファイルからデータベースを復元します。
-Tオプションは、標準入力を有効にするためのオプションです。これにより、リダイレクトされたファイルの内容がコンテナ内のMySQLクライアントに渡されます。
-pオプションの後にパスワードを直接指定しています。これは、MySQLクライアントが接続時にパスワードを要求するためです。

```bash
docker compose exec -T db mysql -u root -psample_root_pass sql-dump < dump.sql
```

4. リストアされていることを確認する